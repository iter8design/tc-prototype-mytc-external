<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]>
<!-->
<html class="no-js" lang="en" dir="ltr">
<!-- InstanceBegin template="/Templates/Full Page Layout.dwt" codeOutsideHTMLIsLocked="false" -->
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
		wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <!-- InstanceBeginEditable name="PageTitle" -->
    <title>Schedule an exam: Step 2 of 5 - Transport Canada</title>
    <!-- InstanceEndEditable -->
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <!-- Meta data -->
    <meta name="description" content="">
    <!-- Meta data-->
    <!--[if gte IE 9 | !IE ]><!-->
    <link href="../../GCWeb/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="../../GCWeb/css/theme.min.css">
    <link rel="stylesheet" href="../../css/cdtsapps.css">
    <link rel="stylesheet" href="../../css/fontawesome/css/all.css">
    <link rel="stylesheet" href="../../css/mytc.css">
    <link rel="stylesheet" href="../../css/utils.css">
    <link rel="stylesheet" href="../../css/plugins.css">
    <link rel="stylesheet" href="../../css/wizard.css">
    <link rel="stylesheet" type="text/css" media="screen" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/redmond/jquery-ui.css">
    <!--<![endif]-->
    <!--[if lt IE 9]>
		<link href="../../GCWeb/assets/favicon.ico" rel="shortcut icon" />
		
		<link rel="stylesheet" href="../../GCWeb/css/ie8-theme.min.css" />
		<script src="../../js/jquery/1.11.1/jquery.min.js"></script>
		<script src="../../wet-boew/js/ie8-wet-boew.min.js"></script>
		<![endif]-->
    <!--[if lte IE 9]>
		
		
		<![endif]-->
    <noscript>
        <link rel="stylesheet" href="../../wet-boew/css/noscript.min.css">
    </noscript>
    <!-- InstanceBeginEditable name="CustomJSLibraries" -->
    <!-- InstanceEndEditable -->
    <!-- InstanceBeginEditable name="CustomCSS" -->
    <!-- InstanceEndEditable -->
</head>

<body class="secondary" vocab="http://schema.org/" typeof="WebPage">
    <ul id="wb-tphp">
        <li class="wb-slc"> <a class="wb-sl" href="#wb-cont">Skip to main content</a> </li>
        <li class="wb-slc visible-sm visible-md visible-lg"> <a class="wb-sl" href="#wb-info">Skip to "About this Web application"</a> </li>
    </ul>
    <header>
        <div id="wb-bnr" class="container">
            <div class="row">
                <div class="brand col-xs-9 col-sm-8 col-md-6">
                    <object type="image/svg+xml" tabindex="-1" data="../../GCWeb/assets/sig-blk-en.svg">
                    </object>
                    <span class="wb-inv"> Government of Canada / <span lang="fr">Gouvernement du Canada</span></span>
                </div>
                <section id="wb-lng" class="text-right col-xs-3 col-sm-4 col-md-6">
                    <h2 class="wb-inv">Language selection</h2>
                    <ul class="list-inline margin-bottom-none">
                        <li><a lang="fr" href="#">Français</a></li>
                    </ul>
                </section>
            </div>
        </div>
        <div class="app-bar">
            <div class="container">
                <div class="row">
                    <section class="col-xs-12 col-sm-12">
                        <h2 class="wb-inv">Transport Canada OneTC</h2>
                        <a class="app-name" href="#">Transport Canada
                        </a>
                    </section>
                    <!--<nav class="col-sm-5 hidden-xs hidden-print" role="navigation">
                        <h2 class="wb-inv">Account menu</h2>
                        <ul class="app-list-account list-unstyled">
                            <li><a href="#" class="btn"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Account settings</a></li>
                            <li><a href="#" class="btn"><span class="glyphicon glyphicon-off" aria-hidden="true"></span> Sign out</a></li>
                        </ul>
                    </nav>-->
                </div>
            </div>
        </div>
        <div class="app-bar-mb">
            <div class="container visible-xs-block hidden-print">
                <nav>
                    <!-- Adjust the following depending on search and/or menu settings -->
                    <h2 class="wb-inv">Search and menu</h2>
                    <ul class="app-list-main list-unstyled">
                        <li class="wb-mb-links" id="wb-glb-mn"><a href="#mb-pnl" aria-controls="mb-pnl" class="btn overlay-lnk" role="button">Menu</a>
                            <h2>Menu</h2>
                        </li>
                    </ul>
                    <div id="mb-pnl"></div>
                </nav>
            </div>
        </div>
        <!--<nav role="navigation" id="wb-sm" data-trgt="mb-pnl" data-ajax-replace="../../includes/menus/menu.html" class="wb-menu visible-md visible-lg" typeof="SiteNavigationElement"></nav>-->


        <nav id="wb-bc" property="breadcrumb">
            <h2>You are here:</h2>
            <div class="container">
                <div class="row">
                    <ol class="breadcrumb">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Services</a></li>
                        <li><a href="#">Aviation</a></li>
                        <li><a href="#">Licensing for pilots and personnel</a></li>
                        <li>Schedule an exam</li>

                    </ol>
                </div>
            </div>
        </nav>
    </header>
    <main property="mainContentOfPage" class="container">
        <!-- InstanceBeginEditable name="Content" -->
        <h1 property="name" id="wb-cont">
            <span class="hd-pre">Schedule an exam</span>
            <span class="hd-title">STEP 2 OF 5</span>
        </h1>

        <div class="alert alert-danger mrgn-bttm-md" role="status">
            <h2>Attention</h2>
            <ol class="fa-ul">
                <li><i class="fa-li fa fa-angle-right"></i>Unfortunately, the date/time selected at this location is no longer available as it was just selected by another person. Please select another date/time.</li>
            </ol>
        </div>


        <h2><span class="hd-pre">{Exam name selected} ({Exam code})</span> Choose a location, date and time</h2>




        <p>
            <label for="addressSearch" class="">Enter your address or postal code to find a Transport Canada Service Centre nearest or most convenient or you:</label>
        </p>
        <div class="row">
            <div class="col-md-6">


                <div class="input-group">
                    <input type="text" id="addressSearch" class="form-control" size="35">
                    <span class="input-group-btn"><button class="btn btn-primary" type="button">Search</button></span>
                </div>

                <a href="#"><i class="fas fa-map-marker-alt mrgn-rght-sm"></i>Use my current location</a>
            </div>
        </div>

        <div class="panel-group mrgn-tp-lg" id="accordion" role="tablist" aria-multiselectable="true">
            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingOne">
                    <h3 class="panel-title">
                        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#locations" aria-expanded="true">
                            Location
                        </a>
                    </h3>
                </div>
                <div id="locations" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-5 scrollable" style="height:540px;">
                                <ul class="list-group">
                                    <li class="list-group-item pddng-lft-0 pddng-rght-0">
                                        <div class="bg-grey-light pddng-lft-sm pddng-rght-sm pddng-tp-sm pddng-bttm-sm">
                                            <div class="row">
                                                <div class="col-md-6 col-sm-12">
                                                    <h4 class="mrgn-0">Victoria (North Saanich)</h4>
                                                    <address class="small mrgn-tp-sm">103-1962 Canso Road <br> North Saanich, BC V8L 5V5</address>
                                                </div>
                                                <div class="col-md-6 col-sm-12"><span class="small">First available appointment on:</span>
                                                    <div class="large mrgn-tp-sm">July 4, 2023</div>
                                                </div>


                                            </div>
                                            <div class="row">

                                                <div class="col-md-12"><button class="btn btn-default width100" type="submit" data-location-title="Victoria (North Saanich)">Select this location <span class="wb-inv">Victoria (North Saanich)</span></button></div>
                                            </div>
                                        </div>


                                    </li>
                                    <li class="list-group-item pddng-lft-0 pddng-rght-0">
                                        <div class="bg-grey-light pddng-lft-sm pddng-rght-sm pddng-tp-sm pddng-bttm-sm">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h4 class="mrgn-0">Surrey</h4>
                                                    <address class="small mrgn-tp-sm">2010-7445 132 St. <br> Surrey, BC V3W 1J8</address>
                                                </div>
                                                <div class="col-md-6"><span class="small">First available appointment on:</span>
                                                    <div class="large mrgn-tp-sm">June 30, 2023</div>
                                                </div>


                                            </div>
                                            <div class="row">

                                                <div class="col-md-12"><button class="btn btn-default width100" type="submit" data-location-title="Surrey">Select this location <span class="wb-inv">Surrey</span></button></div>
                                            </div>
                                        </div>

                                    </li>
                                    <li class="list-group-item pddng-lft-0 pddng-rght-0">
                                        <div class="bg-grey-light pddng-lft-sm pddng-rght-sm pddng-tp-sm pddng-bttm-sm">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h4 class="mrgn-0">Abbotsford</h4>
                                                    <address class="small mrgn-tp-sm">103-1785 Clearbrook Rd <br> Abbotsford, BC V2T 5X5</address>
                                                </div>
                                                <div class="col-md-6"><span class="small">First available appointment on:</span>
                                                    <div class="large mrgn-tp-sm">July 18, 2023</div>
                                                </div>


                                            </div>
                                            <div class="row">

                                                <div class="col-md-12"><button class="btn btn-default width100" type="submit" data-location-title="Abbotsford">Select this location <span class="wb-inv">Abbotsford</span></button></div>
                                            </div>
                                        </div>

                                    </li>
                                    <li class="list-group-item pddng-lft-0 pddng-rght-0">
                                        <div class="bg-grey-light pddng-lft-sm pddng-rght-sm pddng-tp-sm pddng-bttm-sm">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h4 class="mrgn-0">Prince George</h4>
                                                    <address class="small mrgn-tp-sm">350-177 Victoria St. <br> Prince George, BC V2L 5R8</address>
                                                </div>
                                                <div class="col-md-6"><span class="small">First available appointment on:</span>
                                                    <div class="large mrgn-tp-sm">June 27, 2023</div>
                                                </div>


                                            </div>
                                            <div class="row">

                                                <div class="col-md-12"><button class="btn btn-default width100" type="submit" data-location-title="Prince George">Select this location <span class="wb-inv">Prince George</span></button></div>
                                            </div>
                                        </div>

                                    </li>

                                    <li class="list-group-item pddng-lft-0 pddng-rght-0">
                                        <div class="bg-grey-light pddng-lft-sm pddng-rght-sm pddng-tp-sm pddng-bttm-sm">
                                            <div class="row" data-geometry="POINT (-75.70535 45.3995)" data-type="wkt">
                                                <div class="col-md-6">
                                                    <h4 class="mrgn-0">Kelowna</h4>
                                                    <address class="small mrgn-tp-sm">4-5583 Airport Way<br> Kelowna, BC V1V 1S1</address>
                                                </div>
                                                <div class="col-md-6"><span class="small">First available appointment on:</span>
                                                    <div class="large mrgn-tp-sm">July 7, 2023</div>
                                                </div>


                                            </div>
                                            <div class="row">

                                                <div class="col-md-12"><button class="btn btn-default width100" type="submit" data-location-title="Kelowna">Select this location <span class="wb-inv">Kelowna</span></button></div>
                                            </div>
                                        </div>

                                    </li>


                                </ul>



                            </div>
                            <div class="col-md-7">

                                <!-- GeomapEnd -->

                                <div id="osm_map" class="wb-geomap geolocation" data-wb-geomap='{
		"layersFile": "osm-map/config-osm-en.js"
	}'>

                                    <div class="wb-geomap-map"></div>

                                    <div class="wb-geomap-layers"></div>

                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingTwo">
                    <h3 class="panel-title">
                        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#dateTime" aria-expanded="false">
                            Date and time
                        </a>
                    </h3>
                </div>
                <div id="dateTime" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                    <div class="panel-body">
                        <p>We've selected the first available date with appointments at this location, but you may select a different date/time that suits your schedule.</p>

                        <div class="week-picker calendar-wk bg-grey-light pddng-sm mrgn-bttm-sm">
                            <div id="#cn-wk">
                                <div class=" text-center">Week of <a href="#" id="selectWeek" title="Select a week"><span id="weekDisplayed">July 3 to July 7,2023</span><i class="fa-solid fa-calendar-week mrgn-lft-sm"></i></a>
                                    <input id="selectedWeek" type="hidden" />
                                </div>
                                <div id="wk-days" class="row">
                                    <div class="col-md-1 col-xs-1 text-center text-middle mrgn-tp-lg">
                                        <a href="#" id="lnk-prv-wk" data-period-start="2023-06-25" data-period-end="2023-07-01" title="View week of June 25 to July 1"><i class="fa-regular fa-arrow-alt-circle-left fa-2xl"></i></a>

                                    </div>
                                    <div class="col-md-2 col-xs-2 text-center pddng-md">Monday
                                        <div class="xlarge text-muted" title="No appointments available on Monday, July 3" data-date="2023-07-03T00:00:00">3</div>

                                    </div>
                                    <div class="col-md-2 col-xs-2 text-center selected-day pddng-md">Tuesday
                                        <a href="#" class="selectable xlarge fnt-wght-bld display-block" data-date="2023-07-04T00:00:00">4</a>
                                    </div>
                                    <div class="col-md-2 col-xs-2 text-center pddng-md">Wednesday
                                        <a href="#" class="selectable xlarge fnt-wght-bld display-block" data-date="2023-07-05T00:00:00">5</a>
                                    </div>

                                    <div class="col-md-2 col-xs-2 text-center pddng-md">Thursday
                                        <div class="xlarge text-muted" title="No appointments available on Thursday, July 6" data-date="2023-07-06T00:00:00">6</div>
                                    </div>
                                    <div class="col-md-2 col-xs-2 text-center pddng-md">Friday <a href="#" class="selectable xlarge fnt-wght-bld display-block" data-date="2023-07-07T00:00:00">7</a></div>
                                    <div class="col-md-1 col-xs-1 text-center text-middle mrgn-tp-lg"><a href="#" id="lnk-nxt-wk" data-period-start="2023-07-09T00:00:00" data-period-end="2023-07-15T00:00:00" title="View week of July 9 to July 15"><i class="fa-regular fa-arrow-alt-circle-right fa-2xl"></i></a></div>
                                </div>
                            </div>
                        </div>

                        <p><i class="fa-regular fa-clock"></i> Duration: Up to 3 hours</p>

                        <div class="row">
                            <div class="col-md-12">
                                <div id="cn-timeslots">
                                    <!--<fieldset class="gc-chckbxrdio">
                                        <legend class="wb-inv">Selected start time</legend>
                                        <ul class="list-unstyled lst-spcd-2">
                                            <li class="radio">
                                                <input type="radio" name="timeslot" id="timeslot-1" checked>
                                                <label for="timeslot-1">8:30am <abbr title="Pacific Time">PT</abbr></label>
                                            </li>
                                            <li class="radio">
                                                <input type="radio" name="timeslot" id="timeslot-2">
                                                <label for="timeslot-2">1:00pm <abbr title="Pacific Time">PT</abbr></label>
                                            </li>
                                        </ul>
                                    </fieldset>-->

                                    <div class="alert alert-info">
                                        <p>Sorry, there are no appointments currently available for the day selected. Select another day.</p>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>


                </div>



            </div>
        </div>


        <div class="nav-button">
            <a href="scheduleExam-step3.html" class="btn btn-primary disabled" id="btnContinue">Continue</a>
            <a href="scheduleExam-step1.html" class="btn btn-default mrgn-lft-md">Go back</a>
        </div>

        <div class="row">
            <div class="datemod col-xs-12 col-md-6 mrgn-tp-lg">
                <dl id="wb-dtmd">
                    <dt>Date modified:&#32;</dt>
                    <dd>
                        <time property="dateModified">
                            <!-- #BeginDate format:IS1 -->2023-03-24
                            <!-- #EndDate -->
                        </time>
                        <span class="version">(V9.9.9)</span>
                    </dd>
                </dl>

            </div>
            <div class="col-xs-12 col-md-6 mrgn-tp-lg">
                <!--<div id="cn-accnt">Transport Canada account number <div class="account-number">TC9999999999</div>
                </div>-->
            </div>
        </div>



    </main>
    <footer id="wb-info">
        <div id="transactFooter" class="landscape"></div>
        <div class="brand">
            <div class="container">
                <div class="row">
                    <nav class="col-md-10 ftr-urlt-lnk">
                        <h2 class="wb-inv">About this Web application</h2>
                        <ul>
                            <li><a href="all/contactUs.html">Contact information</a></li>
                            <li><a href="all/termsConditions.html">Terms and conditions</a></li>
                            <li><a href="all/privacy.html">Privacy</a></li>
                        </ul>
                    </nav>
                    <div class="col-xs-6 visible-sm visible-xs tofpg"><a href="#wb-cont">Top of Page <span class="glyphicon glyphicon-chevron-up"></span></a></div>
                    <div class="col-xs-6 col-md-2 text-right">
                        <object type="image/svg+xml" tabindex="-1" role="img" data="../../GCWeb/assets/wmms-blk.svg" aria-label="Symbol of the Government of Canada">
                        </object>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--[if gte IE 9 | !IE ]><!-->
    <script src="../../js/jquery/2.2.4/jquery.js"></script>
    <script src="../../wet-boew/js/wet-boew.min.js"></script>

    <!--<![endif]
        -->
    <!--[if lt IE 9]>
		<script src="../../wet-boew/js/ie8-wet-boew2.min.js"></script>
		
		<![endif]-->
    <script src="../../GCWeb/js/theme.min.js"></script>
    <!-- InstanceBeginEditable name="CustomJS" -->
    <script src="../../js/tc/bootstrap/transition.js"></script>
    <script src="../../js/tc/bootstrap/collapse.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script>
        $(document).on("wb-ready.wb", function(event) {
            $("button").on("click", function() {
                var location = $(this).data("location-title");
                $("#locations").collapse("toggle");
                $("#dateTime").collapse("toggle");
                $("#headingOne a").append(": " + location) + " selected";
                $("#btnContinue").removeClass("disabled");
            });



            //Load next week with first day of the week selected, refresh timeslots
            $("#lnk-nxt-wk, lnk-prv-wk").on("click", function(event) {
                event.preventDefault();

                var periodStart = $(this).data("period-start");
                console.log(periodStart);
                changeWeek(periodStart);
                /* $("#wk-days").hide("slide", {
                    direction: "right"
                }, 500, function() {
                    console.log("DONE!"); */


                /* $("#wk-days").find("[data-date]").each(function() {
                        var date = new Date($(this).data("date")) - 7; 
                    

                    });

                });*/
            });

            //Load previous week with first day of the week selected, refresh timeslots
            /*$("#lnk-prv-wk").on("click", function(event) {
                event.preventDefault();
                $("#wk-days").hide("slide", {
                    direction: "left"
                }, 500, function() {
                    console.log("DONE!");

                });
            });*/



            var timeslotTemplate = "<li class=\"radio\"><input type=\"radio\" name=\"timeslot\" id=\"timeslot-\"><label for=\"timeslot-\">{99:99}{am/pm} <abbr title=\"Pacific Time\">PT</abbr></label></li>";
            //On selecting a date, refresh available timeslots
            $(".selectable").on("click", function(event) {
                event.preventDefault();
                //Highlight the day selected
                $("#wk-days").find(".bg-info").removeClass("bg-info");
                $(this).parent().addClass("bg-info");

                //Update display of timeslots
                $("#cn-timeslots").fadeOut(300);
                $("#cn-timeslots ul>li").each(function() {
                    $(this).remove();
                });

                // Get list of timeslots
                for (var i = 0; i < 5; i++) {
                    $(".gc-chckbxrdio>ul").append(timeslotTemplate);
                }

                //Select the first one
                $(".gc-chckbxrdio>ul>li:first-child>input[type=radio]").attr("checked", true);
                // Bring the timeslots back into view
                $("#cn-timeslots").show("slide");
            });


            var startDate;
            var endDate;

            var selectCurrentWeek = function() {
                window.setTimeout(function() {
                    $('.ui-datepicker-div').find('.ui-datepicker-current-day a').addClass('ui-state-active')
                }, 1);
            }


            var txtTo = " to ";
            var txtNoAppointments = "No appointments available";

            $('#selectedWeek').datepicker({
                showOtherMonths: true,
                numberOfMonths: 3,
                selectOtherMonths: true,
                showOn: "button",
                buttonText: "",
                onSelect: function(dateText, inst) {
                    var date = $(this).datepicker('getDate');
                    startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay());
                    endDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 6);
                    var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;
                    $('#startDate').text($.datepicker.formatDate(dateFormat, startDate, inst.settings));
                    $('#endDate').text($.datepicker.formatDate(dateFormat, endDate, inst.settings));

                    var displayStartDate = $.datepicker.formatDate('M d', new Date(startDate));
                    var displayEndDate = $.datepicker.formatDate('M d', new Date(endDate));
                    console.log(displayStartDate);
                    $("#weekDisplayed").html(displayStartDate + txtTo + displayEndDate);
                    selectCurrentWeek();
                },

                beforeShowDay: function(date) {
                    //Disable all weekends
                    var day = date.getDay();
                    if ((day == 6) || (day == 0)) {
                        return [false, "", txtNoAppointments];
                    } else {
                        return [true];
                    }


                    var cssClass = '';
                    if (date >= startDate && date <= endDate)
                        cssClass = 'ui-datepicker-current-day';
                    return [true, cssClass];
                },
                onChangeMonthYear: function(year, month, inst) {
                    selectCurrentWeek();
                }
            });


            $("#selectWeek").on("click", function(e) {
                e.preventDefault();
                $('#selectedWeek').datepicker("show");
            });


        });

        function changeWeek(selectedDay) {
            var weekView = $("#wk-days").clone();

            $(weekView).find("[data-date]").each(function() {
                var date = $(this).attr("data", date);

            });

            $("#wk-days").hide("slide", {
                direction: "right"
            }, 500, function() {
                $("#cn-wk").append(weekView);
            });

            $("#wk-days").show("slide", {
                direction: "left"
            }, 500, function() {

            });
        }





        function disableDays(date) {
            var m = date.getMonth(),
                d = date.getDate(),
                y = date.getFullYear();
            if ($.inArray((m + 1) + '-' + d + '-' + y, disabledDays) != -1) return [false];
            return [true];
        }

        $(document).on("wb-ready.wb-geomap", "#osm_map", function(event, map) {
            // Get the map to use in zoomFeature function
            var myMap = map;
            myMap.getView().setCenter(-75.70535, 45.3995);

            // if reprojection is needed
            myMap.getView().setCenter(ol.proj.transform([-75.70535, 45.3995], "EPSG:4326", "EPSG:3978"));

            myMap.getView().setZoom(8);
        });

    </script>
    <!-- InstanceEndEditable -->
</body>
<!-- InstanceEnd -->

</html>
